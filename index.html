<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>James Bond Greeting App</title>
    <meta name="description" content="A stylish greeting app with fireworks, confetti, quotes, and multi-language support">
    <meta name="theme-color" content="#3498db">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <div class="container">
        <h1>Welcome to the Greeting App</h1>
        <div class="input-section">
            <label for="nameInput" class="sr-only">Enter your name</label>
            <input type="text" id="nameInput" placeholder="Enter your name">
            <button id="greetButton">Greet Me!</button>
        </div>
        <div class="effect-chooser">
            <span>Fireworks</span>
            <label class="switch">
                <input type="checkbox" id="effectToggle">
                <span class="slider"></span>
            </label>
            <span>Confetti</span>
        </div>
        <div id="greetingMessage" class="message" aria-live="polite"></div>
    </div>
    <script src="app.js"></script>
    <script>
        // Register service worker for PWA functionality
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // Add install prompt for Android
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install button or banner
            const installBanner = document.createElement('div');
            installBanner.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; background: #3498db; color: white; padding: 10px; text-align: center; z-index: 10000;">
                    <span>ðŸ“± Install this app on your Android device!</span>
                    <button onclick="installApp()" style="margin-left: 10px; background: white; color: #3498db; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Install</button>
                    <button onclick="dismissInstall()" style="margin-left: 5px; background: transparent; color: white; border: 1px solid white; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Later</button>
                </div>
            `;
            document.body.appendChild(installBanner);
            
            window.installApp = () => {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('User accepted the install prompt');
                    }
                    deferredPrompt = null;
                    document.body.removeChild(installBanner);
                });
            };
            
            window.dismissInstall = () => {
                document.body.removeChild(installBanner);
            };
        });
    </script>
</body>
</html>
